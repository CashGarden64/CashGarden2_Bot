// Function to watch an ad and earn points (CORRECTED AD FUNCTION CALL)
        function watchAd() {
            updateDailyAdCount(); // Check and reset daily count if needed

            if (isAdLoading) return;
            
            if (dailyAdsWatched >= MAX_ADS_PER_DAY) {
                document.getElementById('ad-status').innerHTML = '<i class="fas fa-exclamation-circle"></i> আজকের দৈনিক বিজ্ঞাপন সীমা শেষ হয়েছে। আগামীকাল আবার চেষ্টা করুন।';
                document.getElementById('watch-ad-btn').disabled = true;
                document.getElementById('watch-ad-btn-earn').disabled = true;
                document.getElementById('auto-ad-btn').disabled = true;
                document.getElementById('auto-ad-btn-earn').disabled = true;
                return;
            }

            // Corrected: Use the actual SDK function name from your HTML (10197905)
            if (typeof window.show_10197905 !== 'function') { // <--- এখানে 10182944 এর বদলে 10197905 হবে
                document.getElementById('ad-status').innerHTML = '<i class="fas fa-exclamation-circle"></i> বিজ্ঞাপন সিস্টেম প্রস্তুত নয়। দয়া করে অপেক্ষা করুন...';
                return;
            }

            isAdLoading = true;
            document.getElementById('watch-ad-btn').disabled = true;
            document.getElementById('watch-ad-btn-earn').disabled = true;
            document.getElementById('ad-status').innerHTML = '<i class="fas fa-spinner fa-spin"></i> বিজ্ঞাপন লোড হচ্ছে...';
            
            try {
                // Show the ad - Corrected: Call the actual SDK function from your HTML
                window.show_10197905().then(() => {
                    // Ad watched successfully
                    watchedAdsCount++;
                    earnedPoints += POINTS_PER_AD;
                    dailyAdsWatched++;
                    lastAdDate = new Date().toDateString();
                    
                    saveUserData();
                    updateUI();
                    document.getElementById('ad-status').innerHTML = '<i class="fas fa-check-circle"></i> বিজ্ঞাপন সফলভাবে দেখা হয়েছে!';
                    
                    // Show coin animation
                    createCoinAnimation(document.getElementById('watch-ad-btn'));
                    
                    // Show success notification
                    showNotification(`১০ টাকা যোগ হয়েছে! আপনার ব্যালেন্স: ${(earnedPoints + referralEarnings).toFixed(2)} টাকা`, 'success');
                    
                    // Check if earned enough for withdrawal
                    if (earnedPoints + referralEarnings >= MIN_WITHDRAW_TAKA) {
                        showNotification(`অভিনন্দন! আপনি উত্তোলনের জন্য ${MIN_WITHDRAW_TAKA} টাকা সংগ্রহ করেছেন।`, 'info');
                    }
                    
                    // If in auto mode, continue after delay
                    if (isAutoMode) {
                        setTimeout(() => {
                            isAdLoading = false;
                            watchAd(); // Call watchAd again for auto mode
                        }, 10000); // 10 seconds delay between auto ads
                    } else {
                        isAdLoading = false;
                        if (dailyAdsWatched < MAX_ADS_PER_DAY) {
                            document.getElementById('watch-ad-btn').disabled = false;
                            document.getElementById('watch-ad-btn-earn').disabled = false;
                            document.getElementById('auto-ad-btn').disabled = false;
                            document.getElementById('auto-ad-btn-earn').disabled = false;
                        } else {
                            document.getElementById('ad-status').innerHTML = '<i class="fas fa-exclamation-circle"></i> আজকের দৈনিক বিজ্ঞাপন সীমা শেষ হয়েছে। আগামীকাল আবার চেষ্টা করুন।';
                        }
                    }
                }).catch(error => {
                    console.error('Error showing ad:', error);
                    document.getElementById('ad-status').innerHTML = '<i class="fas fa-times-circle"></i> বিজ্ঞাপন দেখানো যায়নি। আবার চেষ্টা করুন।';
                    isAdLoading = false;
                    
                    if (isAutoMode) {
                        setTimeout(watchAd, 10000); // Retry after 10 seconds
                    } else {
                        if (dailyAdsWatched < MAX_ADS_PER_DAY) {
                            document.getElementById('watch-ad-btn').disabled = false;
                            document.getElementById('watch-ad-btn-earn').disabled = false;
                            document.getElementById('auto-ad-btn').disabled = false;
                            document.getElementById('auto-ad-btn-earn').disabled = false;
                        }
                    }
                });
            } catch (error) {
                console.error('Error in ad system:', error);
                document.getElementById('ad-status').innerHTML = '<i class="fas fa-exclamation-triangle"></i> বিজ্ঞাপন সিস্টেমে ত্রুটি। পৃষ্ঠাটি রিফ্রেশ করুন।';
                isAdLoading = false;
                if (dailyAdsWatched < MAX_ADS_PER_DAY) {
                    document.getElementById('watch-ad-btn').disabled = false;
                    document.getElementById('watch-ad-btn-earn').disabled = false;
                    document.getElementById('auto-ad-btn').disabled = false;
                    document.getElementById('auto-ad-btn-earn').disabled = false;
                }
            }
        }
